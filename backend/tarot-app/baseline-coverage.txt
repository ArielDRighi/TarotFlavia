
> tarot-app@0.0.1 test:cov
> jest --coverage --no-watchman --all

PASS test/ai/retry.utils.spec.ts (54.96 s)
PASS src/modules/cache/application/services/interpretation-cache.service.spec.ts (72.08 s)
PASS src/modules/usage-limits/guards/check-usage-limit.guard.spec.ts (5.08 s)
PASS src/common/rate-limiting/rate-limit.service.spec.ts
PASS src/modules/auth/password-reset.service.spec.ts
PASS src/modules/tarot/daily-reading/daily-reading.service.spec.ts (83.12 s)
PASS test/cache/cache-admin.controller.spec.ts (83.13 s)
PASS src/modules/tarotistas/services/metrics.service.spec.ts (84 s)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:19 [31m  ERROR[39m [38;5;3m[IncrementUsageInterceptor] [39m[31mFailed to increment usage for user 1, feature tarot_reading[39m
Error: Database error
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\usage-limits\interceptors\increment-usage.interceptor.spec.ts:107:9)
    at Promise.then.completed (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at run (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\testWorker.js:106:12)
PASS src/modules/usage-limits/interceptors/increment-usage.interceptor.spec.ts
PASS src/modules/ai/infrastructure/providers/openai.provider.spec.ts (85.396 s)
PASS src/modules/users/users.service.spec.ts (30.435 s)
PASS src/modules/usage-limits/usage-limits.service.spec.ts
PASS src/common/rate-limiting/rate-limit.controller.spec.ts
PASS src/modules/auth/auth.controller.spec.ts (5.367 s)
PASS src/modules/tarot/readings/application/use-cases/regenerate-reading.use-case.spec.ts
PASS src/modules/security/security-events.controller.spec.ts
PASS src/modules/tarot/readings/application/services/readings-orchestrator.service.spec.ts (90.925 s)
PASS src/modules/cache/application/services/cache-warming.service.spec.ts (7.722 s)
PASS src/modules/auth/auth.service.spec.ts
PASS test/ai/prompt-builder.service.spec.ts (5.059 s)
PASS src/modules/predefined-questions/predefined-questions.controller.spec.ts
PASS src/modules/tarotistas/controllers/metrics.controller.spec.ts
PASS src/modules/categories/categories.service.spec.ts (7.265 s)
PASS test/readings/readings.controller.spec.ts (99.733 s)
[31m[Nest] 19420  - [39m25/11/2025, 08:56:36 [31m  ERROR[39m [38;5;3m[InterpretationsService] [39m[31mAll AI providers failed for tarotista 1, using fallback[39m
[31m[Nest] 19420  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[InterpretationsService] [39mError: All providers failed
    at Object.<anonymous> [90m(D:\Personal\tarot\backend\tarot-app\[39msrc\modules\tarot\interpretations\interpretations.service.spec.ts:212:9[90m)[39m
    at Promise.then.completed [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\utils.js:298:28[90m)[39m
    at new Promise (<anonymous>)
    at callAsyncCircusFn [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\utils.js:231:10[90m)[39m
    at _callCircusTest [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:316:40[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at _runTest [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:252:3[90m)[39m
    at _runTestsForDescribeBlock [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:126:9[90m)[39m
    at _runTestsForDescribeBlock [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:121:9[90m)[39m
    at _runTestsForDescribeBlock [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:121:9[90m)[39m
    at run [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:71:3[90m)[39m
    at runAndTransformResultsToJestFormat [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21[90m)[39m
    at jestAdapter [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\legacy-code-todo-rewrite\jestAdapter.js:79:19[90m)[39m
    at runTestInternal [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-runner[24m\build\runTest.js:367:16[90m)[39m
    at runTest [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-runner[24m\build\runTest.js:444:34[90m)[39m
    at Object.worker [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-runner[24m\build\testWorker.js:106:12[90m)[39m
[31m[Nest] 19420  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[InterpretationsService] [39m[31mDefault tarotista (Flavia) not found in database. Using fallback ID 1. This indicates a seed data or migration issue that should be investigated.[39m
[31m[Nest] 19420  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[InterpretationsService] [39m[31mError al guardar interpretaci√≥n:[39m
[31m[Nest] 19420  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[InterpretationsService] [39mError: Database connection lost
    at Object.<anonymous> [90m(D:\Personal\tarot\backend\tarot-app\[39msrc\modules\tarot\interpretations\interpretations.service.spec.ts:428:11[90m)[39m
    at Promise.then.completed [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\utils.js:298:28[90m)[39m
    at new Promise (<anonymous>)
    at callAsyncCircusFn [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\utils.js:231:10[90m)[39m
    at _callCircusTest [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:316:40[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at _runTest [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:252:3[90m)[39m
    at _runTestsForDescribeBlock [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:126:9[90m)[39m
    at _runTestsForDescribeBlock [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:121:9[90m)[39m
    at _runTestsForDescribeBlock [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:121:9[90m)[39m
    at _runTestsForDescribeBlock [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:121:9[90m)[39m
    at run [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\run.js:71:3[90m)[39m
    at runAndTransformResultsToJestFormat [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21[90m)[39m
    at jestAdapter [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-circus[24m\build\legacy-code-todo-rewrite\jestAdapter.js:79:19[90m)[39m
    at runTestInternal [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-runner[24m\build\runTest.js:367:16[90m)[39m
    at runTest [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-runner[24m\build\runTest.js:444:34[90m)[39m
    at Object.worker [90m(D:\Personal\tarot\backend\tarot-app\[39mnode_modules\[4mjest-runner[24m\build\testWorker.js:106:12[90m)[39m
PASS src/modules/health/health.controller.spec.ts (9.681 s)
PASS src/modules/tarot/interpretations/interpretations.service.spec.ts (8.38 s)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:172:16)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:184:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:172:16)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:226:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:151:20)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:330:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:40 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:151:20)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:383:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:41 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:151:20)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:419:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:41 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to generate interpretation for reading 1[39m
Error: AI service unavailable
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:437:9)
    at Promise.then.completed (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at run (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\testWorker.js:106:12)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:41 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to generate interpretation for reading 1[39m
NotFoundException: Predefined question with ID 999 not found
    at CreateReadingUseCase.execute (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:115:19)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:473:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:41 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to generate interpretation for reading 1[39m
Error: Update failed
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:497:44)
    at Promise.then.completed (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at run (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\testWorker.js:106:12)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:41 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:172:16)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:519:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:41 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:172:16)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:550:22)
[31m[Nest] 23960  - [39m25/11/2025, 08:56:41 [31m  ERROR[39m [38;5;3m[CreateReadingUseCase] [39m[31mFailed to calculate revenue for reading 1[39m
TypeError: this.subscriptionsService.getSubscriptionInfo is not a function
    at CreateReadingUseCase.getSubscriptionInfo [as calculateRevenueForReading] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:189:41)
    at CreateReadingUseCase.calculateRevenueForReading [as execute] (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.ts:151:20)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\tarot\readings\application\use-cases\create-reading.use-case.spec.ts:614:7)
PASS src/modules/tarot/readings/application/use-cases/create-reading.use-case.spec.ts (14.05 s)
PASS src/modules/users/users.controller.spec.ts (10.397 s)
PASS src/modules/admin/admin-users.controller.spec.ts (11.292 s)
PASS src/modules/tarot/cards/cards.service.spec.ts (7.653 s)
PASS src/modules/tarot/readings/application/use-cases/get-reading.use-case.spec.ts
PASS src/modules/health/ai-health.service.spec.ts (19.036 s)
PASS src/database/seeds/tarot-cards.seeder.spec.ts
  ‚óè Console

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      ‚úÖ Cards already seeded (found 78 cards). Skipping...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:33:13)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      ‚úÖ Cards already seeded (found 78 cards). Skipping...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:33:13)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

    console.log
      üåü Starting Tarot Cards seeding process...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:20:11)

    console.log
      üì¶ Found deck: Rider-Waite (ID: 1)

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:48:11)

    console.log
      üìä Card distribution:

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:83:11)

    console.log
         ‚Ä¢ Arcanos Mayores: 22

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:84:11)

    console.log
         ‚Ä¢ Bastos (Wands): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:85:11)

    console.log
         ‚Ä¢ Copas (Cups): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:86:11)

    console.log
         ‚Ä¢ Espadas (Swords): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:87:11)

    console.log
         ‚Ä¢ Oros (Pentacles): 14

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:88:11)

    console.log
         ‚Ä¢ TOTAL: 78

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:89:11)

    console.log
      üíæ Saving cards to database...

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:92:11)

    console.log
      ‚úÖ Successfully seeded 78 tarot cards!

      at seedTarotCards (src/database/seeds/tarot-cards.seeder.ts:95:11)

PASS src/modules/tarotistas/entities/tarotista-config.entity.spec.ts
PASS src/modules/ai-usage/ai-usage.controller.spec.ts
PASS src/modules/health/ai-health.controller.spec.ts
PASS src/modules/tarotistas/entities/tarotista-card-meaning.entity.spec.ts
PASS src/modules/tarotistas/controllers/tarotistas-admin.controller.spec.ts
PASS src/modules/security/entities/security-event.entity.spec.ts
PASS src/modules/users/dto/ban-user.dto.spec.ts
PASS src/modules/health/database-health.service.spec.ts
PASS src/modules/audit/audit-log.controller.spec.ts
PASS src/modules/auth/refresh-token.service.spec.ts
PASS src/modules/ai/application/services/ai-provider.service.spec.ts
PASS test/readings/requires-premium-for-custom-question.guard.spec.ts
PASS src/modules/tarotistas/services/reports.service.spec.ts (8.271 s)
PASS src/modules/predefined-questions/predefined-questions.service.spec.ts
PASS src/modules/users/dto/update-user-plan.dto.spec.ts
PASS src/modules/tarot/cards/cards.controller.spec.ts (5.248 s)
PASS src/database/seeds/flavia-user.seeder.spec.ts
  ‚óè Console

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      üå± Creating Flavia user...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:28:11)

    console.log
      ‚úÖ Flavia user created (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:48:11)

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      ‚úÖ Flavia user already exists (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:24:13)

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      üå± Creating Flavia user...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:28:11)

    console.log
      ‚úÖ Flavia user created (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:48:11)

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      üå± Creating Flavia user...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:28:11)

    console.log
      ‚úÖ Flavia user created (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:48:11)

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      üå± Creating Flavia user...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:28:11)

    console.log
      ‚úÖ Flavia user created (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:48:11)

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      üå± Creating Flavia user...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:28:11)

    console.log
      ‚úÖ Flavia user created (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:48:11)

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      üå± Creating Flavia user...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:28:11)

    console.log
      ‚úÖ Flavia user created (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:48:11)

    console.log
      üîç Checking if Flavia user exists...

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:16:11)

    console.log
      ‚úÖ Flavia user already exists (ID: 1)

      at seedFlaviaUser (src/database/seeds/flavia-user.seeder.ts:24:13)

PASS src/modules/users/entities/user.entity.spec.ts
PASS src/modules/tarotistas/controllers/reports.controller.spec.ts
PASS src/modules/audit/dto/query-audit-log.dto.spec.ts
PASS src/modules/tarot/spreads/spreads.controller.spec.ts
PASS src/modules/scheduling/entities/tarotist-exception.entity.spec.ts
PASS src/modules/tarotistas/controllers/tarotistas-public.controller.spec.ts
PASS src/modules/ai-usage/ai-quota.service.spec.ts
PASS src/modules/ai-usage/ai-quota.guard.spec.ts
PASS src/modules/scheduling/entities/session.entity.spec.ts
PASS src/modules/tarot/readings/readings.controller.spec.ts (32.933 s)
PASS test/cache/interpretation-cache.service.spec.ts
PASS src/common/services/ip-blocking.service.spec.ts
PASS src/modules/tarot/decks/decks.controller.spec.ts
PASS src/modules/tarot/readings/application/services/reading-validator.service.spec.ts
PASS src/modules/subscriptions/subscriptions.controller.spec.ts
PASS src/modules/tarotistas/dto/set-custom-meaning.dto.spec.ts
PASS src/database/seeds/predefined-questions.seeder.spec.ts
  ‚óè Console

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      ‚úÖ Predefined questions already seeded (found 30 questions). Skipping...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:42:13)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üì¶ Found 6 categories

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:55:11)

    console.log
      üìä Question distribution:

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:94:11)

    console.log
         Amor y Relaciones: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Trabajo y Carrera: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Dinero y Finanzas: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Salud y Bienestar: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Espiritual y Crecimiento: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         General: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         ‚Ä¢ TOTAL: 42 questions

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:98:11)

    console.log
      üíæ Saving questions to database...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:101:11)

    console.log
      ‚úÖ Successfully seeded 42 predefined questions!

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:104:11)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üì¶ Found 6 categories

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:55:11)

    console.log
      üìä Question distribution:

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:94:11)

    console.log
         Amor y Relaciones: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Trabajo y Carrera: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Dinero y Finanzas: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Salud y Bienestar: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Espiritual y Crecimiento: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         General: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         ‚Ä¢ TOTAL: 42 questions

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:98:11)

    console.log
      üíæ Saving questions to database...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:101:11)

    console.log
      ‚úÖ Successfully seeded 42 predefined questions!

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:104:11)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üì¶ Found 6 categories

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:55:11)

    console.log
      üìä Question distribution:

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:94:11)

    console.log
         Amor y Relaciones: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Trabajo y Carrera: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Dinero y Finanzas: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Salud y Bienestar: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Espiritual y Crecimiento: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         General: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         ‚Ä¢ TOTAL: 42 questions

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:98:11)

    console.log
      üíæ Saving questions to database...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:101:11)

    console.log
      ‚úÖ Successfully seeded 42 predefined questions!

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:104:11)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üì¶ Found 6 categories

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:55:11)

    console.log
      üìä Question distribution:

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:94:11)

    console.log
         Amor y Relaciones: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Trabajo y Carrera: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Dinero y Finanzas: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Salud y Bienestar: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Espiritual y Crecimiento: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         General: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         ‚Ä¢ TOTAL: 42 questions

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:98:11)

    console.log
      üíæ Saving questions to database...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:101:11)

    console.log
      ‚úÖ Successfully seeded 42 predefined questions!

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:104:11)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üì¶ Found 6 categories

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:55:11)

    console.log
      üìä Question distribution:

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:94:11)

    console.log
         Amor y Relaciones: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Trabajo y Carrera: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Dinero y Finanzas: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Salud y Bienestar: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Espiritual y Crecimiento: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         General: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         ‚Ä¢ TOTAL: 42 questions

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:98:11)

    console.log
      üíæ Saving questions to database...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:101:11)

    console.log
      ‚úÖ Successfully seeded 42 predefined questions!

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:104:11)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üì¶ Found 6 categories

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:55:11)

    console.log
      üìä Question distribution:

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:94:11)

    console.log
         Amor y Relaciones: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Trabajo y Carrera: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Dinero y Finanzas: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Salud y Bienestar: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Espiritual y Crecimiento: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         General: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         ‚Ä¢ TOTAL: 42 questions

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:98:11)

    console.log
      üíæ Saving questions to database...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:101:11)

    console.log
      ‚úÖ Successfully seeded 42 predefined questions!

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:104:11)

    console.log
      üí¨ Starting Predefined Questions seeding process...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:29:11)

    console.log
      üì¶ Found 6 categories

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:55:11)

    console.log
      üìä Question distribution:

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:94:11)

    console.log
         Amor y Relaciones: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Trabajo y Carrera: 8 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Dinero y Finanzas: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Salud y Bienestar: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         Espiritual y Crecimiento: 7 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         General: 6 questions

      at src/database/seeds/predefined-questions.seeder.ts:96:13
          at Array.forEach (<anonymous>)

    console.log
         ‚Ä¢ TOTAL: 42 questions

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:98:11)

    console.log
      üíæ Saving questions to database...

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:101:11)

    console.log
      ‚úÖ Successfully seeded 42 predefined questions!

      at seedPredefinedQuestions (src/database/seeds/predefined-questions.seeder.ts:104:11)

PASS src/common/logger/logger.service.spec.ts
  ‚óè Console

    console.log
      2025-11-25 08:56:54 [32minfo[39m [TestContext]: Test message

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [32minfo[39m [MyContext]: Test message

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [32minfo[39m [test-correlation-123] [TestContext]: Test with correlation {"correlationId":"test-correlation-123"}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [32minfo[39m [TestContext]: Test with metadata {"userId":123,"action":"test"}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [31merror[39m [TestContext]: Error message

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [31merror[39m [TestContext]: Error occurred {"stack":"Error: Test error\n    at Object.<anonymous> (D:\\Personal\\tarot\\backend\\tarot-app\\src\\common\\logger\\logger.service.spec.ts:121:21)\n    at Promise.then.completed (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (D:\\Personal\\tarot\\backend\\tarot-app\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [33mwarn[39m [TestContext]: Warning message

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [34mdebug[39m [TestContext]: Debug message

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [36mverbose[39m [TestContext]: Verbose message

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [32mhttp[39m [HTTPContext]: HTTP request {"method":"GET","url":"/test"}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:54 [32minfo[39m [Context]: Test

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

[31m[Nest] 7568  - [39m25/11/2025, 08:56:55 [31m  ERROR[39m [38;5;3m[EmailService] [39m[31mError al enviar email de lectura compartida a user@example.com[39m
Error: SMTP Error
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\email\email.service.spec.ts:111:21)
    at Promise.then.completed (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at run (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\testWorker.js:106:12)
[31m[Nest] 7568  - [39m25/11/2025, 08:56:55 [31m  ERROR[39m [38;5;3m[EmailService] [39m[31mError al enviar email de bienvenida a newuser@example.com[39m
Error: SMTP Error
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\email\email.service.spec.ts:174:21)
    at Promise.then.completed (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at run (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\testWorker.js:106:12)
[31m[Nest] 7568  - [39m25/11/2025, 08:56:55 [31m  ERROR[39m [38;5;3m[EmailService] [39m[31mError al enviar email de recuperaci√≥n de contrase√±a a user@example.com[39m
Error: SMTP Error
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\email\email.service.spec.ts:227:21)
    at Promise.then.completed (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at run (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\testWorker.js:106:12)
[31m[Nest] 7568  - [39m25/11/2025, 08:56:55 [31m  ERROR[39m [38;5;3m[EmailService] [39m[31mError al enviar email de cambio de plan a user@example.com[39m
Error: SMTP Error
    at Object.<anonymous> (D:\Personal\tarot\backend\tarot-app\src\modules\email\email.service.spec.ts:287:21)
    at Promise.then.completed (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:121:9)
    at run (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (D:\Personal\tarot\backend\tarot-app\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (D:\Personal\tarot\backend\tarot-app\node_modules\jest-runner\build\testWorker.js:106:12)
PASS src/modules/email/email.service.spec.ts
PASS src/modules/ai-usage/ai-usage.service.spec.ts
PASS src/modules/tarot/readings/application/use-cases/share-reading.use-case.spec.ts
PASS src/modules/categories/categories.controller.spec.ts
PASS src/modules/tarotistas/services/tarotistas-public.service.spec.ts
FAIL test/integration/usage-limits.integration.spec.ts (121.3 s)
  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Reading Counter Increment ‚Ä∫ should increment user reading counter when creating reading

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Reading Counter Increment ‚Ä∫ should increment counter multiple times for multiple readings

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Reading Counter Increment ‚Ä∫ should enforce daily limit for FREE users (3 readings/day)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Daily Usage Limits ‚Ä∫ should track daily usage in usage_limit table

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Daily Usage Limits ‚Ä∫ should increment daily usage count for multiple readings

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Premium Plan Benefits ‚Ä∫ should allow unlimited readings for PREMIUM users

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

FAIL test/integration/readings-interpretations-ai.integration.spec.ts (121.366 s)
  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should create reading and generate interpretation with AI

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should store interpretation with AI metadata in database

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should create reading without interpretation when generateInterpretation is false

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should link cards correctly to reading

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Cache Functionality ‚Ä∫ should cache interpretation for same card combination

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Cache Functionality ‚Ä∫ should NOT use cache when card positions are different

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Integration with Tarotista System ‚Ä∫ should use tarotista configuration for interpretation

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Integration with Tarotista System ‚Ä∫ should record reading for tarotista metrics

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should fail when spread does not exist

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should fail when cards do not exist

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle AI provider errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

FAIL test/integration/cache-ai.integration.spec.ts (121.28 s)
  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have cached_interpretations table with correct schema

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have tarotista_id as nullable column

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have hit_count tracking column

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have last_used_at timestamp column

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Cleanup System ‚Ä∫ should be able to query expired cache entries

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Integration with Readings ‚Ä∫ should cache interpretation after first reading (requires OpenAI key)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Integration with Readings ‚Ä∫ should reuse cached interpretation for identical reading (requires OpenAI key)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Integration with Readings ‚Ä∫ should invalidate cache when tarotista updates meanings (requires implementation)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Performance Metrics ‚Ä∫ should track when cache was created

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Performance Metrics ‚Ä∫ should track cache expiration time

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Performance Metrics ‚Ä∫ should store card combination as JSONB

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

PASS src/modules/tarotistas/dto/update-tarotista-config.dto.spec.ts
PASS src/modules/auth/entities/refresh-token.entity.spec.ts
PASS src/modules/tarot/readings/application/use-cases/restore-reading.use-case.spec.ts
PASS src/modules/scheduling/entities/tarotist-availability.entity.spec.ts
PASS src/modules/auth/password-reset-cleanup.service.spec.ts
PASS src/modules/auth/strategies/jwt.strategy.spec.ts
PASS src/modules/ai-usage/ai-provider-cost.service.spec.ts
PASS src/modules/subscriptions/subscriptions.service.spec.ts
PASS src/modules/audit/entities/audit-log.entity.spec.ts
PASS src/modules/audit/audit-log.service.spec.ts
PASS src/modules/tarot/spreads/spreads.service.spec.ts
PASS src/modules/tarot/readings/application/use-cases/delete-reading.use-case.spec.ts
PASS src/modules/tarotistas/entities/tarotista.entity.spec.ts
PASS src/modules/tarot/decks/decks.service.spec.ts
PASS src/modules/tarotistas/dto/approve-application.dto.spec.ts
PASS src/modules/tarotistas/services/tarotistas-admin.service.spec.ts
PASS src/modules/tarot/readings/infrastructure/repositories/typeorm-reading.repository.spec.ts
PASS src/modules/tarot/readings/application/use-cases/list-readings.use-case.spec.ts
PASS src/modules/tarotistas/dto/get-public-tarotistas-filter.dto.spec.ts
PASS test/integration/email.integration.spec.ts (124.363 s)
PASS test/readings/create-reading.dto.spec.ts
PASS src/modules/tarotistas/tarotistas.service.spec.ts
PASS src/modules/tarotistas/services/revenue-calculation.service.spec.ts
PASS src/modules/cache/application/services/cache-strategy.service.spec.ts
PASS src/modules/admin/admin-dashboard.controller.spec.ts
PASS src/modules/tarotistas/entities/user-tarotista-subscription.entity.spec.ts
PASS test/cache/interpretation-cache-invalidation.spec.ts
PASS src/database/seeds/reading-categories.seeder.spec.ts
  ‚óè Console

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      ‚úÖ Categories already seeded (found 6 category/categories). Skipping...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:88:13)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
      üìö Starting Reading Categories seeding process...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:83:11)

    console.log
      üíæ Saving 6 categories...

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:108:11)

    console.log
      ‚úÖ Successfully seeded 6 categories!

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:111:11)

    console.log
         Categories:

      at seedReadingCategories (src/database/seeds/reading-categories.seeder.ts:112:11)

    console.log
         ‚ù§Ô∏è Amor y Relaciones (order: 1)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üíº Carrera y Trabajo (order: 2)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üí∞ Dinero y Finanzas (order: 3)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üè• Salud y Bienestar (order: 4)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         ‚ú® Crecimiento Espiritual (order: 5)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

    console.log
         üåü Consulta General (order: 6)

      at src/database/seeds/reading-categories.seeder.ts:114:13
          at Array.forEach (<anonymous>)

PASS src/common/services/output-sanitizer.service.spec.ts
PASS src/modules/tarot/cards/services/card-meaning.service.spec.ts
PASS src/modules/auth/entities/password-reset-token.entity.spec.ts
PASS src/database/seeds/tarot-decks.seeder.spec.ts
  ‚óè Console

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      ‚úÖ Decks already seeded (found 1 deck(s)). Skipping...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:24:13)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

    console.log
      üÉè Starting Tarot Decks seeding process...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:19:11)

    console.log
      üíæ Saving deck: Rider-Waite...

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:46:11)

    console.log
      ‚úÖ Successfully seeded deck: Rider-Waite (ID: 1)

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:49:11)

    console.log
         ‚Ä¢ Artist: Pamela Colman Smith

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:52:11)

    console.log
         ‚Ä¢ Year Created: 1909

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:53:11)

    console.log
         ‚Ä¢ Tradition: Herm√©tica / Orden del Amanecer Dorado

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:54:11)

    console.log
         ‚Ä¢ Card Count: 78

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:55:11)

    console.log
         ‚Ä¢ Is Default: true

      at seedTarotDecks (src/database/seeds/tarot-decks.seeder.ts:56:11)

PASS src/modules/cache/application/services/cache-analytics.service.spec.ts
PASS src/modules/tarotistas/dto/apply-to-be-tarotista.dto.spec.ts
PASS src/common/middleware/correlation-id.middleware.spec.ts
PASS src/modules/tarotistas/dto/get-tarotistas-filter.dto.spec.ts
PASS src/database/seeds/tarot-spreads.seeder.spec.ts
  ‚óè Console

    console.log
      ‚úì Spreads already seeded (4 spreads found). Skipping...

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:12:13)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
      ‚úì Tarot spreads seeded successfully!

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:51:11)

    console.log
        Total spreads: 4

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:52:11)

    console.log
        Distribution:

      at seedTarotSpreads (src/database/seeds/tarot-spreads.seeder.ts:53:11)

    console.log
          - 1 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 3 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 5 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

    console.log
          - 10 card(s): 1 spread(s)

      at src/database/seeds/tarot-spreads.seeder.ts:57:15
          at Array.forEach (<anonymous>)

[33m[Nest] 18924  - [39m25/11/2025, 08:57:02 [33m   WARN[39m [38;5;3m[CustomThrottlerGuard] [39m[33mIPBlockingService not provided. IP blocking and violation tracking disabled.[39m
[33m[Nest] 18924  - [39m25/11/2025, 08:57:02 [33m   WARN[39m [38;5;3m[CustomThrottlerGuard] [39m[33mIPWhitelistService not provided. IP whitelisting disabled.[39m
[95m[Nest] 18924  - [39m25/11/2025, 08:57:02 [95m  DEBUG[39m [38;5;3m[CustomThrottlerGuard] [39m[95mWhitelisted IP bypassing rate limit: 192.168.1.1[39m
[95m[Nest] 18924  - [39m25/11/2025, 08:57:02 [95m  DEBUG[39m [38;5;3m[CustomThrottlerGuard] [39m[95mWhitelisted IP bypassing rate limit: 192.168.1.1[39m
[33m[Nest] 18924  - [39m25/11/2025, 08:57:02 [33m   WARN[39m [38;5;3m[CustomThrottlerGuard] [39m[33mBlocked request from IP: 192.168.1.100[39m
PASS src/modules/audit/dto/create-audit-log.dto.spec.ts
PASS src/common/guards/custom-throttler.guard.spec.ts
[33m[Nest] 18924  - [39m25/11/2025, 08:57:02 [33m   WARN[39m [38;5;3m[CustomThrottlerGuard] [39m[33mBlocked request from IP: 192.168.1.100[39m
[33m[Nest] 18924  - [39m25/11/2025, 08:57:02 [33m   WARN[39m [38;5;3m[CustomThrottlerGuard] [39m[33mBlocked request from IP: 10.0.0.1[39m
[33m[Nest] 18924  - [39m25/11/2025, 08:57:02 [33m   WARN[39m [38;5;3m[CustomThrottlerGuard] [39m[33mIPBlockingService not provided. IP blocking and violation tracking disabled.[39m
[33m[Nest] 18924  - [39m25/11/2025, 08:57:02 [33m   WARN[39m [38;5;3m[CustomThrottlerGuard] [39m[33mIPWhitelistService not provided. IP whitelisting disabled.[39m
[95m[Nest] 18924  - [39m25/11/2025, 08:57:02 [95m  DEBUG[39m [38;5;3m[CustomThrottlerGuard] [39m[95mWhitelisted IP bypassing rate limit: 127.0.0.1[39m
[95m[Nest] 18924  - [39m25/11/2025, 08:57:02 [95m  DEBUG[39m [38;5;3m[CustomThrottlerGuard] [39m[95mWhitelisted IP bypassing rate limit: ::1[39m
[95m[Nest] 18924  - [39m25/11/2025, 08:57:02 [95m  DEBUG[39m [38;5;3m[CustomThrottlerGuard] [39m[95mCustom rate limit metadata detected for undefined: 5 req/30000s[39m
PASS src/modules/tarot/readings/interceptors/readings-cache.interceptor.spec.ts
PASS src/modules/admin/admin-dashboard.service.spec.ts
PASS src/common/logger/correlation-id.service.spec.ts
PASS src/config/env-validator.spec.ts
PASS src/modules/cache/application/services/cache-cleanup.service.spec.ts
PASS src/config/env.validation.spec.ts
PASS src/app.controller.spec.ts
PASS src/modules/tarotistas/dto/create-tarotista.dto.spec.ts
PASS src/common/decorators/rate-limit.decorator.spec.ts
PASS src/common/interceptors/logging.interceptor.spec.ts
PASS src/modules/auth/guards/admin.guard.spec.ts
PASS src/modules/tarotistas/dto/reject-application.dto.spec.ts
PASS src/common/guards/roles.guard.spec.ts
PASS test/ai/circuit-breaker.utils.spec.ts
PASS src/database/seeds/flavia-ia-config.seeder.spec.ts
  ‚óè Console

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üå± Creating Flavia IA config...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia IA config created (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:61:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      ‚úÖ Flavia IA config already exists (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:37:13)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üå± Creating Flavia IA config...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia IA config created (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:61:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üå± Creating Flavia IA config...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia IA config created (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:61:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üå± Creating Flavia IA config...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia IA config created (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:61:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üå± Creating Flavia IA config...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia IA config created (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:61:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üå± Creating Flavia IA config...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia IA config created (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:61:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      üå± Creating Flavia IA config...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia IA config created (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:61:11)

    console.log
      üîç Checking if Flavia IA config exists...

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:20:11)

    console.log
      ‚úÖ Flavia IA config already exists (ID: 1)

      at seedFlaviaIAConfig (src/database/seeds/flavia-ia-config.seeder.ts:37:13)

PASS src/database/seeds/flavia-tarotista.seeder.spec.ts
  ‚óè Console

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      üå± Creating Flavia tarotista profile...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia tarotista profile created (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:65:11)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      ‚úÖ Flavia tarotista profile already exists (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:37:13)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      üå± Creating Flavia tarotista profile...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia tarotista profile created (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:65:11)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      üå± Creating Flavia tarotista profile...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia tarotista profile created (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:65:11)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      üå± Creating Flavia tarotista profile...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia tarotista profile created (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:65:11)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      üå± Creating Flavia tarotista profile...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia tarotista profile created (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:65:11)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      üå± Creating Flavia tarotista profile...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:43:11)

    console.log
      ‚úÖ Flavia tarotista profile created (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:65:11)

    console.log
      üîç Checking if Flavia tarotista profile exists...

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:20:11)

    console.log
      ‚úÖ Flavia tarotista profile already exists (ID: 1)

      at seedFlaviaTarotista (src/database/seeds/flavia-tarotista.seeder.ts:37:13)

PASS src/modules/auth/guards/jwt-auth.guard.spec.ts
PASS src/modules/tarotistas/dto/update-tarotista.dto.spec.ts
PASS test/ai/ai-error.types.spec.ts
PASS test/integration/auth-users.integration.spec.ts (142.517 s)
  ‚óè Console

    console.log
      2025-11-25 08:57:01 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1914,"ipAddress":"127.0.0.1","details":{"email":"integration-auth-test@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:02 [33mwarn[39m [SecurityEventService]: Security Event: failed_login {"eventType":"failed_login","severity":"medium","userId":1918,"ipAddress":"127.0.0.1","details":{"email":"integration-auth-test@example.com","reason":"Invalid password"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:03 [32minfo[39m [SecurityEventService]: Security Event: failed_login {"eventType":"failed_login","severity":"low","userId":null,"ipAddress":"127.0.0.1","details":{"email":"nonexistent@example.com","reason":"User not found"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:04 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1922,"ipAddress":"127.0.0.1","details":{"email":"integration-auth-test@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:222:13)

    console.log
      Password reset link:

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:223:13)

    console.log
      /reset-password?token=3e619730972aadb1deeaf6a7e34a1983636c911483025eb2024b29e6b74dc3c6

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:224:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:225:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:222:13)

    console.log
      Password reset link:

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:223:13)

    console.log
      /reset-password?token=4e51b14d13249e81ac3b6696aceace8651185f9db7b4aec897d1d60700209082

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:224:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:225:13)

    console.log
      2025-11-25 08:57:10 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1937,"ipAddress":"127.0.0.1","details":{"email":"integration-auth-test@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:11 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1942,"ipAddress":"127.0.0.1","details":{"email":"integration-auth-test@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:222:13)

    console.log
      Password reset link:

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:223:13)

    console.log
      /reset-password?token=7f2ad797bf54e2566af2ac2f6d7b2bc2357eb4a250fe59b70dfda9dcddecc48e

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:224:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:225:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:222:13)

    console.log
      Password reset link:

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:223:13)

    console.log
      /reset-password?token=050baded712aa461a76cfe5aee7093706d166c133556c39e8fbb4b0b1c7931b5

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:224:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:225:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:222:13)

    console.log
      Password reset link:

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:223:13)

    console.log
      /reset-password?token=8b49be1d70f37ea05303650b4e0bd576ed77120abea2b79f08cef2518e1d33c7

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:224:13)

    console.log
      ========================================

      at AuthService.log [as forgotPassword] (src/modules/auth/auth.service.ts:225:13)

    console.log
      2025-11-25 08:57:16 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1957,"ipAddress":"127.0.0.1","details":{"email":"integration-auth-test@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:16 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1957,"ipAddress":"192.168.1.1","details":{"email":"integration-auth-test@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS test/integration/admin.integration.spec.ts (149.587 s)
  ‚óè Console

    console.log
      2025-11-25 08:56:56 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1901,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071815372-0.17196178758837632@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:59 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1910,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071818889-0.25096570487418335@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:01 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1915,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071820620-0.3375319902098821@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:03 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1921,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071823001-0.18018058894341005@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:05 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1925,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071824637-0.621750210855305@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:07 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1930,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071826581-0.9497822029127991@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:08 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1936,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071828289-0.2301534299542316@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:10 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1939,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071829894-0.6231869375866981@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:12 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1944,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071831563-0.10611646744801462@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:12 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1945,"ipAddress":"test-user-agent","details":{"email":"regular-test-1764071832259-0.9519245767022968@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:13 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1948,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071833024-0.11175405420495998@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:14 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1952,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071834155-0.3283467682563914@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:15 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1956,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071835271-0.7167539144838679@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:17 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1961,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071837364-0.8219229257611305@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:19 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1964,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071838868-0.5739171916966699@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:20 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1968,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071840027-0.11601654472467282@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:22 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1971,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071841527-0.935514436688442@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:23 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1975,"ipAddress":"test-admin-agent","details":{"email":"admin-test-1764071842880-0.15550029379401598@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

PASS test/integration/categories-questions.integration.spec.ts (151.173 s)
  ‚óè Console

    console.log
      2025-11-25 08:56:57 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1904,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071815543-0.31576484881100364@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:56:59 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1912,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071819051-0.5197778210046984@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:01 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1916,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071820661-0.1679044500110427@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:03 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1919,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071822865-0.2939279895700917@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:04 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1924,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071823983-0.2933934860731884@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:06 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1928,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071825552-0.9832875451830523@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:07 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1931,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071826920-0.6076272120501429@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:08 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1935,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071828221-0.5731568167157188@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:10 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1940,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071829862-0.7036877511628761@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:11 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1943,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071831321-0.3732473794755806@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:13 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1947,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071832495-0.9681026658065972@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:14 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1951,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071833920-0.6757525060035761@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:15 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1955,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071835051-0.17030652510392308@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:16 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1959,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071836063-0.9896069599502537@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:17 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1960,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071837160-0.5043010452177736@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:18 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1962,"ipAddress":"test-user-agent","details":{"email":"regular-1764071838013@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:19 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1965,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071838916-0.9453903357801727@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:20 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1967,"ipAddress":"test-user-agent","details":{"email":"regular-1764071839720@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:21 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1969,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071840563-0.3325100724784382@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:22 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1972,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071841636-0.5125608057731859@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:23 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1974,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071842656-0.1357638975674833@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:24 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1977,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071843759-0.14842253144704132@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      2025-11-25 08:57:25 [32minfo[39m [SecurityEventService]: Security Event: successful_login {"eventType":"successful_login","severity":"low","userId":1978,"ipAddress":"test-admin-agent","details":{"email":"admin-categories-1764071844791-0.12077818204781465@example.com"}}

      at Console.log (../../node_modules/winston/lib/winston/transports/console.js:87:23)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
--------------------------------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------------
File                                                    | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                            
--------------------------------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------------
All files                                               |    79.4 |    59.43 |   74.11 |   79.03 |                                                                              
 src                                                    |   12.87 |        0 |   42.85 |    9.37 |                                                                              
  app.controller.ts                                     |     100 |      100 |     100 |     100 |                                                                              
  app.service.ts                                        |     100 |      100 |     100 |     100 |                                                                              
  validate-seeders-e2e.ts                               |       0 |        0 |       0 |       0 | 1-147                                                                        
 src/common/decorators                                  |   61.81 |       40 |      50 |   59.61 |                                                                              
  rate-limit.decorator.ts                               |     100 |    57.14 |     100 |     100 | 51-53                                                                        
  roles.decorator.ts                                    |     100 |      100 |     100 |     100 |                                                                              
  sanitize.decorator.ts                                 |   52.27 |       25 |      40 |   52.27 | 11,41-46,65-68,76-80,88-92,101-113                                           
 src/common/enums                                       |     100 |      100 |     100 |     100 |                                                                              
  user-role.enum.ts                                     |     100 |      100 |     100 |     100 |                                                                              
 src/common/filters                                     |   33.33 |        0 |       0 |   23.07 |                                                                              
  throttler-exception.filter.ts                         |   33.33 |        0 |       0 |   23.07 | 17-35                                                                        
 src/common/guards                                      |   82.85 |     62.5 |      75 |   81.53 |                                                                              
  custom-throttler.guard.ts                             |   77.77 |       55 |      60 |   76.92 | 105-107,121-149                                                              
  roles.guard.ts                                        |     100 |      100 |     100 |     100 |                                                                              
 src/common/interceptors                                |     100 |    81.25 |     100 |     100 |                                                                              
  logging.interceptor.ts                                |     100 |    81.25 |     100 |     100 | 63-70                                                                        
 src/common/logger                                      |   96.07 |    80.76 |     100 |   95.74 |                                                                              
  correlation-id.service.ts                             |   94.73 |    33.33 |     100 |   94.11 | 48                                                                           
  logger.service.ts                                     |   96.87 |    86.95 |     100 |   96.66 | 65                                                                           
 src/common/middleware                                  |   93.75 |       75 |     100 |   92.85 |                                                                              
  correlation-id.middleware.ts                          |   93.75 |       75 |     100 |   92.85 | 18                                                                           
 src/common/rate-limiting                               |     100 |      100 |     100 |     100 |                                                                              
  rate-limit.controller.ts                              |     100 |      100 |     100 |     100 |                                                                              
  rate-limit.service.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/common/services                                    |   85.36 |    80.95 |      76 |   84.95 |                                                                              
  ip-blocking.service.ts                                |   96.61 |    86.66 |     100 |   96.36 | 45,135                                                                       
  ip-whitelist.service.ts                               |   42.85 |       50 |      25 |      40 | 15-19,44-74                                                                  
  output-sanitizer.service.ts                           |     100 |      100 |     100 |     100 |                                                                              
 src/common/validators                                  |   28.57 |        0 |   33.33 |    23.8 |                                                                              
  is-secure-url.validator.ts                            |   30.43 |        0 |      40 |      25 | 15-55                                                                        
  max-json-depth.validator.ts                           |   26.92 |        0 |   28.57 |   22.72 | 16-52                                                                        
 src/modules/admin                                      |   84.23 |    46.39 |   81.35 |   83.92 |                                                                              
  admin-dashboard.controller.ts                         |     100 |      100 |     100 |     100 |                                                                              
  admin-dashboard.service.ts                            |    77.2 |    38.33 |   75.55 |   76.42 | 61-138,174-245                                                               
  admin-users.controller.ts                             |   91.66 |    59.45 |     100 |   91.46 | 118,163,255,303,367,372,432                                                  
 src/modules/admin/constants                            |     100 |      100 |     100 |     100 |                                                                              
  cache.constants.ts                                    |     100 |      100 |     100 |     100 |                                                                              
 src/modules/admin/dto                                  |     100 |      100 |     100 |     100 |                                                                              
  dashboard-metrics.dto.ts                              |     100 |      100 |     100 |     100 |                                                                              
  recent-reading.dto.ts                                 |     100 |      100 |     100 |     100 |                                                                              
  recent-user.dto.ts                                    |     100 |      100 |     100 |     100 |                                                                              
  stats-response.dto.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/modules/admin/rate-limits                          |   61.53 |        0 |   28.57 |   58.82 |                                                                              
  ip-whitelist-admin.controller.ts                      |   63.63 |        0 |      25 |      60 | 56-57,79-80,118-122                                                          
  rate-limits-admin.controller.ts                       |   58.82 |      100 |   33.33 |   57.14 | 89-97                                                                        
 src/modules/ai-usage                                   |   87.45 |    68.62 |      85 |   86.73 |                                                                              
  ai-provider-cost.service.ts                           |   71.42 |    48.48 |   81.81 |   70.83 | 52-53,188-193,216-219,233-235,254-257,270-272,284-316                        
  ai-quota.controller.ts                                |    90.9 |      100 |      50 |   88.88 | 72                                                                           
  ai-quota.guard.ts                                     |     100 |      100 |     100 |     100 |                                                                              
  ai-quota.service.ts                                   |   92.68 |       80 |   72.72 |    92.5 | 76,137-139,242,273                                                           
  ai-usage.controller.ts                                |     100 |      100 |     100 |     100 |                                                                              
  ai-usage.service.ts                                   |   96.29 |    65.21 |     100 |   96.07 | 209,222                                                                      
  skip-quota-check.decorator.ts                         |     100 |      100 |     100 |     100 |                                                                              
 src/modules/ai-usage/constants                         |     100 |      100 |     100 |     100 |                                                                              
  ai-usage.constants.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/modules/ai-usage/dto                               |     100 |      100 |     100 |     100 |                                                                              
  ai-usage-stats.dto.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/modules/ai-usage/entities                          |     100 |      100 |     100 |     100 |                                                                              
  ai-provider-usage.entity.ts                           |     100 |      100 |     100 |     100 |                                                                              
  ai-usage-log.entity.ts                                |     100 |      100 |     100 |     100 |                                                                              
 src/modules/ai/application/dto                         |       0 |      100 |     100 |       0 |                                                                              
  ai-request.dto.ts                                     |       0 |      100 |     100 |       0 | 1-17                                                                         
  ai-response.dto.ts                                    |       0 |      100 |     100 |       0 | 1-21                                                                         
 src/modules/ai/application/prompts                     |   20.58 |    18.18 |   57.14 |   20.58 |                                                                              
  tarot-prompts.ts                                      |   20.58 |    18.18 |   57.14 |   20.58 | 12-129                                                                       
 src/modules/ai/application/services                    |   95.13 |       75 |   95.45 |   94.94 |                                                                              
  ai-provider.service.ts                                |   94.56 |    70.96 |     100 |   94.44 | 208-217,247-249                                                              
  prompt-builder.service.ts                             |   95.69 |    78.78 |    92.3 |   95.45 | 97,216,239-243                                                               
 src/modules/ai/domain/interfaces                       |     100 |      100 |     100 |     100 |                                                                              
  ai-provider.interface.ts                              |     100 |      100 |     100 |     100 |                                                                              
 src/modules/ai/infrastructure/errors                   |   98.79 |    91.66 |     100 |   98.76 |                                                                              
  ai-error.types.ts                                     |     100 |      100 |     100 |     100 |                                                                              
  circuit-breaker.utils.ts                              |     100 |      100 |     100 |     100 |                                                                              
  retry.utils.ts                                        |      95 |    66.66 |     100 |   94.44 | 49                                                                           
 src/modules/ai/infrastructure/providers                |    47.8 |    32.74 |      40 |   47.82 |                                                                              
  deepseek.provider.ts                                  |   23.18 |     1.75 |      10 |   22.58 | 24-243                                                                       
  groq.provider.ts                                      |   23.52 |     5.26 |      10 |   22.95 | 31-245                                                                       
  openai.provider.ts                                    |   97.05 |    91.22 |     100 |   98.36 | 65                                                                           
 src/modules/audit                                      |     100 |    83.33 |     100 |     100 |                                                                              
  audit-log.controller.ts                               |     100 |      100 |     100 |     100 |                                                                              
  audit-log.service.ts                                  |     100 |    83.33 |     100 |     100 | 43-44                                                                        
 src/modules/audit/decorators                           |       0 |      100 |       0 |       0 |                                                                              
  audit.decorators.ts                                   |       0 |      100 |       0 |       0 | 1-15                                                                         
 src/modules/audit/dto                                  |     100 |      100 |     100 |     100 |                                                                              
  create-audit-log.dto.ts                               |     100 |      100 |     100 |     100 |                                                                              
  query-audit-log.dto.ts                                |     100 |      100 |     100 |     100 |                                                                              
 src/modules/audit/entities                             |     100 |      100 |     100 |     100 |                                                                              
  audit-log.entity.ts                                   |     100 |      100 |     100 |     100 |                                                                              
 src/modules/audit/enums                                |     100 |      100 |     100 |     100 |                                                                              
  audit-action.enum.ts                                  |     100 |      100 |     100 |     100 |                                                                              
 src/modules/auth                                       |   98.65 |       75 |     100 |   99.05 |                                                                              
  auth.controller.ts                                    |     100 |     62.5 |     100 |     100 | 104-172,240-241                                                              
  auth.service.ts                                       |     100 |    93.93 |     100 |     100 | 116,231                                                                      
  password-reset-cleanup.service.ts                     |     100 |      100 |     100 |     100 |                                                                              
  password-reset.service.ts                             |   97.14 |       60 |     100 |   96.96 | 68                                                                           
  refresh-token.service.ts                              |   95.83 |    41.66 |     100 |   97.77 | 102                                                                          
 src/modules/auth/dto                                   |     100 |      100 |     100 |     100 |                                                                              
  forgot-password.dto.ts                                |     100 |      100 |     100 |     100 |                                                                              
  login.dto.ts                                          |     100 |      100 |     100 |     100 |                                                                              
  refresh-token.dto.ts                                  |     100 |      100 |     100 |     100 |                                                                              
  reset-password.dto.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/modules/auth/dto/validators                        |   28.57 |        0 |      50 |   28.57 |                                                                              
  is-strong-password.validator.ts                       |   28.57 |        0 |      50 |   28.57 | 12-34                                                                        
 src/modules/auth/entities                              |     100 |      100 |     100 |     100 |                                                                              
  password-reset-token.entity.ts                        |     100 |      100 |     100 |     100 |                                                                              
  refresh-token.entity.ts                               |     100 |      100 |     100 |     100 |                                                                              
 src/modules/auth/guards                                |     100 |      100 |     100 |     100 |                                                                              
  admin.guard.ts                                        |     100 |      100 |     100 |     100 |                                                                              
  jwt-auth.guard.ts                                     |     100 |      100 |     100 |     100 |                                                                              
 src/modules/auth/strategies                            |     100 |    83.33 |     100 |     100 |                                                                              
  jwt.strategy.ts                                       |     100 |    83.33 |     100 |     100 | 25,48                                                                        
 src/modules/cache/application/constants                |     100 |      100 |     100 |     100 |                                                                              
  cache-strategy.constants.ts                           |     100 |      100 |     100 |     100 |                                                                              
 src/modules/cache/application/dto                      |   79.24 |      100 |     100 |   79.24 |                                                                              
  cache-analytics.dto.ts                                |     100 |      100 |     100 |     100 |                                                                              
  cache-stats.dto.ts                                    |       0 |      100 |     100 |       0 | 1-14                                                                         
  invalidate-cache.dto.ts                               |       0 |      100 |     100 |       0 | 1-21                                                                         
 src/modules/cache/application/services                 |   80.99 |    55.12 |   77.41 |   81.18 |                                                                              
  cache-analytics.service.ts                            |    57.4 |    16.66 |   41.66 |      58 | 135-265                                                                      
  cache-cleanup.service.ts                              |     100 |      100 |     100 |     100 |                                                                              
  cache-strategy.service.ts                             |   69.62 |    52.94 |   71.42 |   69.33 | 123-161,195-202                                                              
  cache-warming.service.ts                              |   81.08 |    58.33 |   72.72 |   81.15 | 64-65,88-89,114-115,136,190-194,222                                          
  interpretation-cache.service.ts                       |     100 |       92 |     100 |     100 | 261,324                                                                      
 src/modules/cache/infrastructure/controllers           |   84.44 |      100 |      50 |   83.72 |                                                                              
  cache-admin.controller.ts                             |   84.44 |      100 |      50 |   83.72 | 166,177,196,219,230,240-241                                                  
 src/modules/cache/infrastructure/entities              |     100 |      100 |     100 |     100 |                                                                              
  cache-metrics.entity.ts                               |     100 |      100 |     100 |     100 |                                                                              
  cached-interpretation.entity.ts                       |     100 |      100 |     100 |     100 |                                                                              
 src/modules/cache/infrastructure/repositories          |       0 |        0 |       0 |       0 |                                                                              
  typeorm-cache.repository.ts                           |       0 |        0 |       0 |       0 | 1-66                                                                         
 src/modules/categories                                 |     100 |      100 |     100 |     100 |                                                                              
  categories.controller.ts                              |     100 |      100 |     100 |     100 |                                                                              
  categories.service.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/modules/categories/dto                             |     100 |      100 |     100 |     100 |                                                                              
  create-category.dto.ts                                |     100 |      100 |     100 |     100 |                                                                              
  update-category.dto.ts                                |     100 |      100 |     100 |     100 |                                                                              
 src/modules/categories/entities                        |     100 |      100 |     100 |     100 |                                                                              
  reading-category.entity.ts                            |     100 |      100 |     100 |     100 |                                                                              
 src/modules/email                                      |      75 |    27.77 |   77.77 |   73.91 |                                                                              
  email.service.ts                                      |      75 |    27.77 |   77.77 |   73.91 | 152-156,180-234                                                              
 src/modules/email/dto                                  |       0 |      100 |     100 |       0 |                                                                              
  send-email.dto.ts                                     |       0 |      100 |     100 |       0 | 1-24                                                                         
 src/modules/health                                     |    71.5 |    35.38 |   53.65 |   70.65 |                                                                              
  ai-health.controller.ts                               |     100 |      100 |     100 |     100 |                                                                              
  ai-health.service.ts                                  |   84.09 |    65.38 |    92.3 |    84.7 | 69-73,87,118-122,132,172-176,186,212                                         
  database-health.service.ts                            |    72.5 |    33.33 |      75 |   71.05 | 68-69,102-105,112-113,123,138,143-155                                        
  health.controller.ts                                  |   46.42 |        0 |   22.72 |   44.44 | 37-44,71-95,127-138,183-205,270                                              
 src/modules/predefined-questions                       |     100 |      100 |     100 |     100 |                                                                              
  predefined-questions.controller.ts                    |     100 |      100 |     100 |     100 |                                                                              
  predefined-questions.service.ts                       |     100 |      100 |     100 |     100 |                                                                              
 src/modules/predefined-questions/dto                   |     100 |      100 |     100 |     100 |                                                                              
  create-predefined-question.dto.ts                     |     100 |      100 |     100 |     100 |                                                                              
  update-predefined-question.dto.ts                     |     100 |      100 |     100 |     100 |                                                                              
 src/modules/predefined-questions/entities              |     100 |      100 |     100 |     100 |                                                                              
  predefined-question.entity.ts                         |     100 |      100 |     100 |     100 |                                                                              
 src/modules/scheduling/controllers                     |       0 |        0 |       0 |       0 |                                                                              
  tarotist-scheduling.controller.ts                     |       0 |      100 |       0 |       0 | 1-229                                                                        
  user-scheduling.controller.ts                         |       0 |        0 |       0 |       0 | 1-172                                                                        
 src/modules/scheduling/domain/enums                    |     100 |      100 |     100 |     100 |                                                                              
  day-of-week.enum.ts                                   |     100 |      100 |     100 |     100 |                                                                              
  exception-type.enum.ts                                |     100 |      100 |     100 |     100 |                                                                              
  payment-status.enum.ts                                |     100 |      100 |     100 |     100 |                                                                              
  session-status.enum.ts                                |     100 |      100 |     100 |     100 |                                                                              
  session-type.enum.ts                                  |     100 |      100 |     100 |     100 |                                                                              
 src/modules/scheduling/dto                             |       0 |      100 |     100 |       0 |                                                                              
  add-exception.dto.ts                                  |       0 |      100 |     100 |       0 | 1-58                                                                         
  availability-query.dto.ts                             |       0 |      100 |     100 |       0 | 1-39                                                                         
  book-session.dto.ts                                   |       0 |      100 |     100 |       0 | 1-63                                                                         
  cancel-session.dto.ts                                 |       0 |      100 |     100 |       0 | 1-15                                                                         
  complete-session.dto.ts                               |       0 |      100 |     100 |       0 | 1-16                                                                         
  confirm-session.dto.ts                                |       0 |      100 |     100 |       0 | 1-16                                                                         
  session-response.dto.ts                               |       0 |      100 |     100 |       0 | 1-80                                                                         
  set-weekly-availability.dto.ts                        |       0 |      100 |     100 |       0 | 1-32                                                                         
 src/modules/scheduling/entities                        |     100 |      100 |     100 |     100 |                                                                              
  session.entity.ts                                     |     100 |      100 |     100 |     100 |                                                                              
  tarotist-availability.entity.ts                       |     100 |      100 |     100 |     100 |                                                                              
  tarotist-exception.entity.ts                          |     100 |      100 |     100 |     100 |                                                                              
 src/modules/scheduling/helpers                         |       0 |      100 |       0 |       0 |                                                                              
  google-meet.helper.ts                                 |       0 |      100 |       0 |       0 | 1-10                                                                         
 src/modules/scheduling/services                        |       0 |        0 |       0 |       0 |                                                                              
  availability.service.ts                               |       0 |        0 |       0 |       0 | 1-366                                                                        
  session.service.ts                                    |       0 |        0 |       0 |       0 | 1-376                                                                        
 src/modules/security                                   |   56.06 |    11.76 |    62.5 |   53.22 |                                                                              
  security-event.service.ts                             |   44.23 |    11.76 |      50 |      42 | 63-72,96-176                                                                 
  security-events.controller.ts                         |     100 |      100 |     100 |     100 |                                                                              
 src/modules/security/dto                               |   44.44 |      100 |       0 |      48 |                                                                              
  create-security-event.dto.ts                          |       0 |      100 |     100 |       0 | 1-34                                                                         
  query-security-event.dto.ts                           |   70.58 |      100 |       0 |      80 | 16,37,43                                                                     
 src/modules/security/entities                          |     100 |      100 |     100 |     100 |                                                                              
  security-event.entity.ts                              |     100 |      100 |     100 |     100 |                                                                              
 src/modules/security/enums                             |     100 |      100 |     100 |     100 |                                                                              
  security-event-severity.enum.ts                       |     100 |      100 |     100 |     100 |                                                                              
  security-event-type.enum.ts                           |     100 |      100 |     100 |     100 |                                                                              
 src/modules/subscriptions                              |    90.9 |    77.14 |      90 |   91.48 |                                                                              
  subscriptions.controller.ts                           |     100 |      100 |     100 |     100 |                                                                              
  subscriptions.service.ts                              |   89.02 |    77.14 |   83.33 |   89.87 | 52,81,178-180,206,247,264                                                    
 src/modules/subscriptions/dto                          |     100 |      100 |     100 |     100 |                                                                              
  set-favorite-tarotista.dto.ts                         |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/cards                                |   94.02 |    88.88 |   93.33 |   93.65 |                                                                              
  cards.controller.ts                                   |     100 |      100 |     100 |     100 |                                                                              
  cards.service.ts                                      |   89.18 |    83.33 |    87.5 |   88.57 | 42-52                                                                        
 src/modules/tarot/cards/dto                            |     100 |      100 |     100 |     100 |                                                                              
  create-card.dto.ts                                    |     100 |      100 |     100 |     100 |                                                                              
  update-card.dto.ts                                    |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/cards/entities                       |     100 |      100 |     100 |     100 |                                                                              
  tarot-card.entity.ts                                  |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/cards/services                       |   94.11 |    83.67 |     100 |   94.79 |                                                                              
  card-meaning.service.ts                               |   94.11 |    83.67 |     100 |   94.79 | 128,280-286                                                                  
 src/modules/tarot/daily-reading                        |   80.41 |    38.88 |   71.42 |   79.34 |                                                                              
  daily-reading.controller.ts                           |   48.48 |        0 |      20 |   45.16 | 59-67,100-107,153-157,188-196                                                
  daily-reading.service.ts                              |   96.87 |    63.63 |     100 |   96.72 | 175,257                                                                      
 src/modules/tarot/daily-reading/dto                    |   96.42 |      100 |       0 |   96.42 |                                                                              
  daily-reading-history.dto.ts                          |     100 |      100 |     100 |     100 |                                                                              
  daily-reading-response.dto.ts                         |    92.3 |      100 |       0 |    92.3 | 24                                                                           
 src/modules/tarot/daily-reading/entities               |     100 |      100 |     100 |     100 |                                                                              
  daily-reading.entity.ts                               |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/decks                                |   94.28 |       80 |   93.33 |   93.93 |                                                                              
  decks.controller.ts                                   |     100 |      100 |     100 |     100 |                                                                              
  decks.service.ts                                      |      90 |       75 |    87.5 |   89.47 | 108-117                                                                      
 src/modules/tarot/decks/dto                            |     100 |      100 |     100 |     100 |                                                                              
  create-deck.dto.ts                                    |     100 |      100 |     100 |     100 |                                                                              
  update-deck.dto.ts                                    |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/decks/entities                       |     100 |      100 |     100 |     100 |                                                                              
  tarot-deck.entity.ts                                  |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/interpretations                      |   83.33 |    72.97 |   72.22 |   82.39 |                                                                              
  interpretations.controller.ts                         |   72.72 |        0 |      25 |      70 | 44,66-67,85-88                                                               
  interpretations.service.ts                            |   85.15 |    77.14 |   85.71 |   84.42 | 83,159-166,268-277,360-387,437-439,470                                       
 src/modules/tarot/interpretations/dto                  |      90 |      100 |       0 |      90 |                                                                              
  generate-interpretation.dto.ts                        |      90 |      100 |       0 |      90 | 49                                                                           
 src/modules/tarot/interpretations/entities             |     100 |      100 |     100 |     100 |                                                                              
  tarot-interpretation.entity.ts                        |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/readings                             |   86.17 |    33.33 |   73.68 |   84.52 |                                                                              
  readings-admin.controller.ts                          |   91.66 |        0 |      50 |      90 | 54                                                                           
  readings-cleanup.service.ts                           |   56.25 |        0 |      50 |      50 | 17-32                                                                        
  readings.controller.ts                                |     100 |      100 |     100 |     100 |                                                                              
  share.controller.ts                                   |   66.66 |      100 |   33.33 |      60 | 50-51,71-72                                                                  
  shared-readings.controller.ts                         |      90 |      100 |      50 |    87.5 | 36                                                                           
 src/modules/tarot/readings/application/services        |   82.14 |    84.84 |   88.46 |    81.9 |                                                                              
  reading-share.service.ts                              |   25.92 |        0 |      25 |   20.83 | 10-46                                                                        
  reading-validator.service.ts                          |     100 |      100 |     100 |     100 |                                                                              
  readings-orchestrator.service.ts                      |     100 |    33.33 |     100 |     100 | 51-95                                                                        
 src/modules/tarot/readings/application/use-cases       |   97.91 |    92.45 |     100 |   97.75 |                                                                              
  create-reading.use-case.ts                            |   93.75 |     82.6 |     100 |   93.54 | 193-214                                                                      
  delete-reading.use-case.ts                            |     100 |      100 |     100 |     100 |                                                                              
  get-reading.use-case.ts                               |     100 |      100 |     100 |     100 |                                                                              
  list-readings.use-case.ts                             |     100 |      100 |     100 |     100 |                                                                              
  regenerate-reading.use-case.ts                        |     100 |      100 |     100 |     100 |                                                                              
  restore-reading.use-case.ts                           |     100 |      100 |     100 |     100 |                                                                              
  share-reading.use-case.ts                             |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/readings/dto                         |   68.67 |      100 |   58.33 |      72 |                                                                              
  create-reading.dto.ts                                 |     100 |      100 |     100 |     100 |                                                                              
  paginated-readings-response.dto.ts                    |     100 |      100 |     100 |     100 |                                                                              
  query-readings.dto.ts                                 |   70.83 |      100 |      40 |      85 | 30,43,74                                                                     
  random-cards.dto.ts                                   |       0 |      100 |       0 |       0 | 1-27                                                                         
  share-reading-response.dto.ts                         |       0 |      100 |     100 |       0 | 1-20                                                                         
  unshare-reading-response.dto.ts                       |       0 |      100 |     100 |       0 | 1-21                                                                         
 src/modules/tarot/readings/dto/validators              |   81.81 |      100 |      50 |   77.77 |                                                                              
  is-exclusive-with.validator.ts                        |   81.81 |      100 |      50 |   77.77 | 32-33                                                                        
 src/modules/tarot/readings/entities                    |     100 |      100 |     100 |     100 |                                                                              
  tarot-reading.entity.ts                               |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/readings/guards                      |     100 |      100 |     100 |     100 |                                                                              
  requires-premium-for-custom-question.guard.ts         |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/readings/infrastructure/repositories |   97.22 |    89.18 |   93.33 |   97.14 |                                                                              
  typeorm-reading.repository.ts                         |   97.22 |    89.18 |   93.33 |   97.14 | 167-168                                                                      
 src/modules/tarot/readings/interceptors                |     100 |      100 |     100 |     100 |                                                                              
  readings-cache.interceptor.ts                         |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/spreads                              |     100 |      100 |     100 |     100 |                                                                              
  spreads.controller.ts                                 |     100 |      100 |     100 |     100 |                                                                              
  spreads.service.ts                                    |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarot/spreads/dto                          |   92.59 |      100 |       0 |   92.59 |                                                                              
  create-spread.dto.ts                                  |   93.33 |      100 |       0 |   93.33 | 87                                                                           
  update-spread.dto.ts                                  |   91.66 |      100 |       0 |   91.66 | 59                                                                           
 src/modules/tarot/spreads/entities                     |     100 |      100 |     100 |     100 |                                                                              
  tarot-spread.entity.ts                                |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarotistas                                 |     100 |      100 |     100 |     100 |                                                                              
  tarotistas.service.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarotistas/controllers                     |     100 |      100 |     100 |     100 |                                                                              
  metrics.controller.ts                                 |     100 |      100 |     100 |     100 |                                                                              
  reports.controller.ts                                 |     100 |      100 |     100 |     100 |                                                                              
  tarotistas-admin.controller.ts                        |     100 |      100 |     100 |     100 |                                                                              
  tarotistas-public.controller.ts                       |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarotistas/dto                             |   85.97 |      100 |   58.33 |    87.5 |                                                                              
  apply-to-be-tarotista.dto.ts                          |     100 |      100 |     100 |     100 |                                                                              
  approve-application.dto.ts                            |     100 |      100 |     100 |     100 |                                                                              
  create-tarotista.dto.ts                               |     100 |      100 |     100 |     100 |                                                                              
  get-public-tarotistas-filter.dto.ts                   |     100 |      100 |     100 |     100 |                                                                              
  get-tarotistas-filter.dto.ts                          |     100 |      100 |     100 |     100 |                                                                              
  metrics-query.dto.ts                                  |    92.5 |      100 |      50 |   97.36 | 29                                                                           
  reject-application.dto.ts                             |     100 |      100 |     100 |     100 |                                                                              
  report-export.dto.ts                                  |   81.48 |      100 |      25 |      88 | 31,58,67                                                                     
  revenue-calculation.dto.ts                            |       0 |      100 |     100 |       0 | 1-78                                                                         
  set-custom-meaning.dto.ts                             |    92.3 |      100 |       0 |    92.3 | 86                                                                           
  update-tarotista-config.dto.ts                        |     100 |      100 |     100 |     100 |                                                                              
  update-tarotista.dto.ts                               |     100 |      100 |     100 |     100 |                                                                              
 src/modules/tarotistas/entities                        |   87.39 |    54.54 |   53.06 |   87.43 |                                                                              
  tarotista-application.entity.ts                       |    93.1 |      100 |      60 |   92.59 | 34,104                                                                       
  tarotista-card-meaning.entity.ts                      |   91.66 |      100 |      60 |   90.47 | 31,43                                                                        
  tarotista-config.entity.ts                            |   95.65 |      100 |   66.66 |      95 | 28                                                                           
  tarotista-revenue-metrics.entity.ts                   |   90.62 |      100 |   57.14 |   89.65 | 32,44,56                                                                     
  tarotista-review.entity.ts                            |   90.32 |      100 |   57.14 |   89.28 | 31,43,58                                                                     
  tarotista.entity.ts                                   |   72.72 |        0 |   35.71 |   75.51 | 37,169-174,189,197,205,216,224,232                                           
  user-tarotista-subscription.entity.ts                 |   91.66 |      100 |    62.5 |    90.9 | 38,53,90                                                                     
 src/modules/tarotistas/services                        |    78.7 |    53.96 |   75.43 |    78.1 |                                                                              
  metrics.service.ts                                    |    97.1 |    76.47 |     100 |   96.92 | 180,223                                                                      
  reports.service.ts                                    |   97.14 |    78.12 |     100 |   97.02 | 165,201,227                                                                  
  revenue-calculation.service.ts                        |   97.36 |       80 |     100 |   97.22 | 68                                                                           
  tarotistas-admin.service.ts                           |   46.09 |    13.88 |   36.36 |   45.65 | 64-68,94-95,98,137,140,143,155,163-344,360,394-403,427,431,449-498           
  tarotistas-public.service.ts                          |     100 |    91.66 |     100 |     100 | 91                                                                           
 src/modules/usage-limits                               |   96.42 |    84.61 |   83.33 |   96.29 |                                                                              
  usage-limits.constants.ts                             |     100 |      100 |     100 |     100 |                                                                              
  usage-limits.service.ts                               |   96.15 |    84.61 |   83.33 |      96 | 83,99                                                                        
 src/modules/usage-limits/decorators                    |     100 |      100 |     100 |     100 |                                                                              
  check-usage-limit.decorator.ts                        |     100 |      100 |     100 |     100 |                                                                              
 src/modules/usage-limits/entities                      |     100 |      100 |     100 |     100 |                                                                              
  usage-limit.entity.ts                                 |     100 |      100 |     100 |     100 |                                                                              
 src/modules/usage-limits/guards                        |      95 |    66.66 |     100 |   94.44 |                                                                              
  check-usage-limit.guard.ts                            |      95 |    66.66 |     100 |   94.44 | 38                                                                           
 src/modules/usage-limits/interceptors                  |   95.23 |       50 |     100 |   94.73 |                                                                              
  increment-usage.interceptor.ts                        |   95.23 |       50 |     100 |   94.73 | 44                                                                           
 src/modules/users                                      |   89.62 |    74.07 |   92.85 |   89.42 |                                                                              
  users.controller.ts                                   |     100 |      100 |     100 |     100 |                                                                              
  users.service.ts                                      |   85.71 |    67.44 |   88.88 |   85.52 | 92,97-99,123,138,145,149,153,157,171,201,232,277,303,328,361,366,371-374,436 
 src/modules/users/dto                                  |   69.11 |       50 |   42.85 |   69.11 |                                                                              
  ban-user.dto.ts                                       |     100 |       50 |     100 |     100 | 21                                                                           
  create-user.dto.ts                                    |     100 |      100 |     100 |     100 |                                                                              
  update-user-plan.dto.ts                               |   83.33 |      100 |       0 |   83.33 | 22,32                                                                        
  update-user.dto.ts                                    |      90 |      100 |       0 |      90 | 55                                                                           
  user-detail.dto.ts                                    |       0 |      100 |     100 |       0 | 1-35                                                                         
  user-list-response.dto.ts                             |       0 |      100 |     100 |       0 | 1-41                                                                         
  user-query.dto.ts                                     |   93.75 |      100 |   66.66 |   93.75 | 44                                                                           
 src/modules/users/entities                             |     100 |      100 |     100 |     100 |                                                                              
  user.entity.ts                                        |     100 |      100 |     100 |     100 |                                                                              
--------------------------------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------------

=============================== Coverage summary ===============================
Statements   : 79.4% ( 5216/6569 )
Branches     : 59.43% ( 983/1654 )
Functions    : 74.11% ( 730/985 )
Lines        : 79.03% ( 4881/6176 )
================================================================================

Summary of all failing tests
FAIL test/integration/usage-limits.integration.spec.ts (121.3 s)
  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Reading Counter Increment ‚Ä∫ should increment user reading counter when creating reading

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Reading Counter Increment ‚Ä∫ should increment counter multiple times for multiple readings

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Reading Counter Increment ‚Ä∫ should enforce daily limit for FREE users (3 readings/day)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Daily Usage Limits ‚Ä∫ should track daily usage in usage_limit table

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Daily Usage Limits ‚Ä∫ should increment daily usage count for multiple readings

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

  ‚óè UsageLimits + Readings Integration Tests ‚Ä∫ Premium Plan Benefits ‚Ä∫ should allow unlimited readings for PREMIUM users

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 46 |[39m   }[33m;[39m
     [90m 47 |[39m
    [31m[1m>[22m[39m[90m 48 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 49 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 50 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 51 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/usage-limits.integration.spec.ts:48:3
      at Object.<anonymous> (test/integration/usage-limits.integration.spec.ts:25:1)

FAIL test/integration/readings-interpretations-ai.integration.spec.ts (121.366 s)
  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should create reading and generate interpretation with AI

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should store interpretation with AI metadata in database

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should create reading without interpretation when generateInterpretation is false

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Reading Creation with AI Interpretation ‚Ä∫ should link cards correctly to reading

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Cache Functionality ‚Ä∫ should cache interpretation for same card combination

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Cache Functionality ‚Ä∫ should NOT use cache when card positions are different

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Integration with Tarotista System ‚Ä∫ should use tarotista configuration for interpretation

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Integration with Tarotista System ‚Ä∫ should record reading for tarotista metrics

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should fail when spread does not exist

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should fail when cards do not exist

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

  ‚óè Readings + Interpretations + AI Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle AI provider errors gracefully

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 48 |[39m   }[33m;[39m
     [90m 49 |[39m
    [31m[1m>[22m[39m[90m 50 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 51 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 52 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 53 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/readings-interpretations-ai.integration.spec.ts:50:3
      at Object.<anonymous> (test/integration/readings-interpretations-ai.integration.spec.ts:24:1)

FAIL test/integration/cache-ai.integration.spec.ts (121.28 s)
  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have cached_interpretations table with correct schema

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have tarotista_id as nullable column

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have hit_count tracking column

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Table Structure ‚Ä∫ should have last_used_at timestamp column

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Cleanup System ‚Ä∫ should be able to query expired cache entries

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Integration with Readings ‚Ä∫ should cache interpretation after first reading (requires OpenAI key)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Integration with Readings ‚Ä∫ should reuse cached interpretation for identical reading (requires OpenAI key)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Integration with Readings ‚Ä∫ should invalidate cache when tarotista updates meanings (requires implementation)

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Performance Metrics ‚Ä∫ should track when cache was created

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Performance Metrics ‚Ä∫ should track cache expiration time

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)

  ‚óè Cache + AI Integration Tests ‚Ä∫ Cache Performance Metrics ‚Ä∫ should store card combination as JSONB

    thrown: "Exceeded timeout of 5000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 37 |[39m   [36mlet[39m _cacheRepository[33m:[39m any[33m;[39m
     [90m 38 |[39m
    [31m[1m>[22m[39m[90m 39 |[39m   beforeAll([36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 40 |[39m     [36mconst[39m moduleFixture[33m:[39m [33mTestingModule[39m [33m=[39m [36mawait[39m [33mTest[39m[33m.[39mcreateTestingModule({
     [90m 41 |[39m       imports[33m:[39m [[33mAppModule[39m][33m,[39m
     [90m 42 |[39m     })[33m.[39mcompile()[33m;[39m[0m

      at test/integration/cache-ai.integration.spec.ts:39:3
      at Object.<anonymous> (test/integration/cache-ai.integration.spec.ts:25:1)


Test Suites: 3 failed, 134 passed, 137 total
Tests:       20 failed, 10 skipped, 1730 passed, 1760 total
Snapshots:   0 total
Time:        226.229 s
Ran all test suites.
npm error Lifecycle script `test:cov` failed with error:
npm error code 1
npm error path D:\Personal\tarot\backend\tarot-app
npm error workspace tarot-app@0.0.1
npm error location D:\Personal\tarot\backend\tarot-app
npm error command failed
npm error command C:\WINDOWS\system32\cmd.exe /d /s /c jest --coverage --no-watchman --all
